<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>A Pen by  Nejc</title>
	<style>
		canvas{
		  background: black;
		  padding: 0;
		  margin: 0;
		}

		body{
		  margin: 0;
		  overflow: hidden;
		}
	</style>
  </head>

  <body>

    <canvas id="c">
</canvas>
    
<script>
var c = document.getElementById('c');
var ctx = c.getContext('2d');
var running = true;
var spawning = true;

var direction = 0;
var mouseX = 0;
var mouseY = 0;

var Particle = function(x,y,s,d,color){
  this.x = x;
  this.y = y;
  this.s = s;
  this.d = d;
  this.c = color;
  
  this.move = function(){
    this.x += Math.cos(this.d)*this.s;
    this.y += Math.sin(this.d)*this.s;
	
	if((this.x < -10) || (this.x > c.width+10) || (this.y < -10) || (this.y > c.height+10)){
	  particles.splice(particles.indexOf(this),1);
	  return 1;
	}
	else return 0;
  }
  
  this.render = function(){
	  var radius = 5;
	  ctx.beginPath();
	  ctx.arc(this.x, this.y, radius, 0, 2 * Math.PI, false);
	  ctx.fillStyle = 'green';
	  ctx.fill();
	  ctx.lineWidth = 1;
	  ctx.strokeStyle = '#003300';
	  ctx.stroke();
  }
}

var particles = [];

tick();

function tick(){
  direction += 0.1;
  if(direction >= 2*Math.PI)direction = 0;
  
  if(spawning){
	particles.push(new Particle(mouseX,mouseY,1,direction,"red"));
  }
  
  ctx.clearRect(0,0,c.width,c.height);
  for(i=0; i<particles.length; i++){
    particles[i].render();
    i += particles[i].move();
  }
  if(running)setTimeout(tick, 1);
}

window.addEventListener('click', function(event){
	mouseX = event.clientX;
	mouseY = event.clientY;
});
window.addEventListener('resize', resize);
function resize(){
  c.width = window.innerWidth;
  c.height = window.innerHeight;
}

resize();
</script>

  </body>
</html>
