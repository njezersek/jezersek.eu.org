<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>A Pen by  Nejc</title>
	<style>
		canvas{
		  background: black;
		  padding: 0;
		  margin: 0;
		}

		body{
		  margin: 0;
		  overflow: hidden;
		}
	</style>
  </head>

  <body>

    <canvas id="c">
</canvas>
    
<script>
/* CONFIG */
updateAll = true;
radius = 1000;
dotRadius = 50;
onSpeed = 1;
offSpeed = 0.1;


var c = document.getElementById('c');
var ctx = c.getContext('2d');

var particles = [];

var mouseX = -1000;
var mouseY = -1000;

var Particle = function(x,y){
	this.x = x;
	this.y = y;
	this.size = 5;
	
	this.render = function(){
		this.resize();
	
		ctx.beginPath();
		ctx.arc(this.x, this.y, this.size, 0, 2 * Math.PI, false);
		ctx.fillStyle = 'green';
		ctx.fill();
		ctx.lineWidth = 1;
		ctx.strokeStyle = '#003300';
		ctx.stroke();
	}
	
	this.resize = function(){
		var nsize = (dotRadius/2)-Math.abs((Math.pow(this.x-mouseX,2)+Math.pow(this.y-mouseY,2))/radius);
		if(updateAll){
			if(nsize<0)nsize = 0;
			if(this.size < nsize) this.size += onSpeed;
			else if(this.size > 0)this.size -= offSpeed;
		}
		else{
			if(nsize<0)nsize = 0;
			else if(this.size < nsize) this.size += onSpeed;
			else if(this.size > 0)this.size -= offSpeed;
		}
		if(this.size < 0)this.size = 0;
	}
}

update();

function update(){
	ctx.clearRect(0,0,c.width,c.height);
	for(i=0; i<particles.length; i++){
		particles[i].render();
	}
	setTimeout(update, 10);
}

window.addEventListener('mousemove', function(event){
	mouseX = event.clientX;
	mouseY = event.clientY;
	//update();
	
});

window.addEventListener('mousedown', function(event){
	
	
});


window.addEventListener('resize', resize);
function resize(){
	c.width = window.innerWidth;
	c.height = window.innerHeight;
	particles = [];
	for(x=0; x<c.width+dotRadius; x+=dotRadius){
		for(y=0; y<c.height+dotRadius; y+=dotRadius){
			particles.push(new Particle(x,y));
		}
	}
	
	update();
}

resize();
</script>

  </body>
</html>
